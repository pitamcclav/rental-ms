(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[16],{1169:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},1360:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},2957:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var s=a(5155),n=a(2115),r=a(3998),i=a(6948),l=a(1834),d=a(5142),c=a(6444),h=a(1186),o=a(7270),u=a(1647),x=a(1169),j=a(6191),m=a(8514),p=a(1360),y=a(8720);function v(){let[e,t]=(0,n.useState)([]),[a,v]=(0,n.useState)([]),[f,g]=(0,n.useState)(!0),[N,A]=(0,n.useState)(!1),[k,w]=(0,n.useState)(null),[C,D]=(0,n.useState)({name:"",email:"",phone:"",unitId:"",startDate:"",status:"active"});(0,n.useEffect)(()=>{S(),T()},[]);let S=async()=>{try{let e=await fetch("/api/tenants"),a=await e.json();t(a)}catch(e){y.oR.error("Failed to fetch tenants")}finally{g(!1)}},T=async()=>{try{let e=await fetch("/api/units"),t=await e.json();v(t)}catch(e){y.oR.error("Failed to fetch units")}},b=async e=>{e.preventDefault();try{let e=k?"/api/tenants/".concat(k.id):"/api/tenants";if(!(await fetch(e,{method:k?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)})).ok)throw Error("Failed to save tenant");y.oR.success(k?"Tenant updated":"Tenant created"),A(!1),F(),S()}catch(e){y.oR.error("Failed to save tenant")}},E=async e=>{if(confirm("Are you sure you want to delete this tenant?"))try{if(!(await fetch("/api/tenants/".concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete tenant");y.oR.success("Tenant deleted"),S()}catch(e){y.oR.error("Failed to delete tenant")}},F=()=>{w(null),D({name:"",email:"",phone:"",unitId:"",startDate:"",status:"active"})};return f?(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[(0,s.jsx)(x.A,{className:"h-8 w-8"}),"Tenants"]}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Manage your tenants and their rental information"})]}),(0,s.jsxs)(l.lG,{open:N,onOpenChange:e=>{A(e),e||F()},children:[(0,s.jsx)(l.zM,{asChild:!0,children:(0,s.jsxs)(r.$,{children:[(0,s.jsx)(j.A,{className:"h-4 w-4 mr-2"}),"Add Tenant"]})}),(0,s.jsx)(l.Cf,{children:(0,s.jsxs)("form",{onSubmit:b,children:[(0,s.jsxs)(l.c7,{children:[(0,s.jsxs)(l.L3,{children:[k?"Edit":"Add"," Tenant"]}),(0,s.jsxs)(l.rr,{children:[k?"Update":"Create a new"," tenant details"]})]}),(0,s.jsxs)("div",{className:"space-y-4 py-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c.J,{htmlFor:"name",children:"Full Name"}),(0,s.jsx)(d.p,{id:"name",value:C.name,onChange:e=>D({...C,name:e.target.value}),placeholder:"e.g., John Doe",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c.J,{htmlFor:"email",children:"Email"}),(0,s.jsx)(d.p,{id:"email",type:"email",value:C.email,onChange:e=>D({...C,email:e.target.value}),placeholder:"e.g., john@example.com",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c.J,{htmlFor:"phone",children:"Phone"}),(0,s.jsx)(d.p,{id:"phone",type:"tel",value:C.phone,onChange:e=>D({...C,phone:e.target.value}),placeholder:"e.g., +1234567890",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c.J,{htmlFor:"unit",children:"Unit"}),(0,s.jsxs)(h.l6,{value:C.unitId,onValueChange:e=>D({...C,unitId:e}),required:!0,children:[(0,s.jsx)(h.bq,{children:(0,s.jsx)(h.yv,{placeholder:"Select unit"})}),(0,s.jsx)(h.gC,{children:a.map(e=>(0,s.jsxs)(h.eb,{value:e.id,children:[e.property.name," - ",e.name," (",e.code,")"]},e.id))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c.J,{htmlFor:"startDate",children:"Start Date"}),(0,s.jsx)(d.p,{id:"startDate",type:"date",value:C.startDate,onChange:e=>D({...C,startDate:e.target.value}),required:!0}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"This date will be used to calculate rent due dates"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c.J,{htmlFor:"status",children:"Status"}),(0,s.jsxs)(h.l6,{value:C.status,onValueChange:e=>D({...C,status:e}),children:[(0,s.jsx)(h.bq,{children:(0,s.jsx)(h.yv,{})}),(0,s.jsxs)(h.gC,{children:[(0,s.jsx)(h.eb,{value:"active",children:"Active"}),(0,s.jsx)(h.eb,{value:"inactive",children:"Inactive"})]})]})]})]}),(0,s.jsx)(l.Es,{children:(0,s.jsxs)(r.$,{type:"submit",children:[k?"Update":"Create"," Tenant"]})})]})})]})]}),(0,s.jsxs)(i.Zp,{children:[(0,s.jsxs)(i.aR,{children:[(0,s.jsx)(i.ZB,{children:"All Tenants"}),(0,s.jsx)(i.BT,{children:"A list of all tenants"})]}),(0,s.jsx)(i.Wu,{children:0===e.length?(0,s.jsx)("p",{className:"text-center text-muted-foreground py-8",children:"No tenants found. Add your first tenant to get started."}):(0,s.jsxs)(o.XI,{children:[(0,s.jsx)(o.A0,{children:(0,s.jsxs)(o.Hj,{children:[(0,s.jsx)(o.nd,{children:"Name"}),(0,s.jsx)(o.nd,{children:"Email"}),(0,s.jsx)(o.nd,{children:"Phone"}),(0,s.jsx)(o.nd,{children:"Unit"}),(0,s.jsx)(o.nd,{children:"Property"}),(0,s.jsx)(o.nd,{children:"Start Date"}),(0,s.jsx)(o.nd,{children:"Status"}),(0,s.jsx)(o.nd,{className:"text-right",children:"Actions"})]})}),(0,s.jsx)(o.BF,{children:e.map(e=>(0,s.jsxs)(o.Hj,{children:[(0,s.jsx)(o.nA,{className:"font-medium",children:e.name}),(0,s.jsx)(o.nA,{children:e.email}),(0,s.jsx)(o.nA,{children:e.phone}),(0,s.jsx)(o.nA,{children:e.unit.name}),(0,s.jsx)(o.nA,{className:"text-muted-foreground",children:e.unit.property.name}),(0,s.jsx)(o.nA,{children:new Date(e.startDate).toLocaleDateString()}),(0,s.jsx)(o.nA,{children:(0,s.jsx)(u.E,{variant:"active"===e.status?"default":"secondary",children:e.status})}),(0,s.jsxs)(o.nA,{className:"text-right space-x-2",children:[(0,s.jsx)(r.$,{variant:"ghost",size:"sm",onClick:()=>{w(e),D({name:e.name,email:e.email,phone:e.phone,unitId:e.unitId,startDate:new Date(e.startDate).toISOString().split("T")[0],status:e.status}),A(!0)},children:(0,s.jsx)(m.A,{className:"h-4 w-4"})}),(0,s.jsx)(r.$,{variant:"ghost",size:"sm",onClick:()=>E(e.id),children:(0,s.jsx)(p.A,{className:"h-4 w-4 text-destructive"})})]})]},e.id))})]})})]})]})}},3214:(e,t,a)=>{Promise.resolve().then(a.bind(a,2957))},8514:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])}},e=>{e.O(0,[678,817,4,702,441,255,358],()=>e(e.s=3214)),_N_E=e.O()}]);