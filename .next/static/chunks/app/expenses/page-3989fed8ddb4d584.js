(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[522],{1120:(e,s,t)=>{"use strict";t.d(s,{T:()=>n});var r=t(5155);t(2115);var a=t(4269);function n(e){let{className:s,...t}=e;return(0,r.jsx)("textarea",{"data-slot":"textarea",className:(0,a.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),...t})}},1360:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(1847).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},3409:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(1847).A)("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]])},4382:(e,s,t)=>{Promise.resolve().then(t.bind(t,9257))},8514:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(1847).A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},9257:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>N});var r=t(5155),a=t(2115),n=t(3998),i=t(6948),d=t(1834),l=t(5142),c=t(6444),o=t(1186),x=t(1120),h=t(7270),p=t(1647),u=t(3409),m=t(6191),j=t(8514),y=t(1360),g=t(8720),v=t(4269);let f=["Maintenance","Utilities","Repairs","Insurance","Property Tax","Management Fees","Cleaning","Landscaping","Other"];function N(){let[e,s]=(0,a.useState)([]),[t,N]=(0,a.useState)([]),[b,A]=(0,a.useState)(!0),[w,k]=(0,a.useState)(!1),[E,S]=(0,a.useState)(null),[C,F]=(0,a.useState)({propertyId:"",description:"",amount:"",category:"",date:new Date().toISOString().split("T")[0],notes:""});(0,a.useEffect)(()=>{R(),T()},[]);let R=async()=>{try{let e=await fetch("/api/expenses"),t=await e.json();s(t)}catch(e){g.oR.error("Failed to fetch expenses")}finally{A(!1)}},T=async()=>{try{let e=await fetch("/api/properties"),s=await e.json();N(s)}catch(e){g.oR.error("Failed to fetch properties")}},M=async e=>{e.preventDefault();try{let e=E?"/api/expenses/".concat(E.id):"/api/expenses";if(!(await fetch(e,{method:E?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...C,amount:parseFloat(C.amount)})})).ok)throw Error("Failed to save expense");g.oR.success(E?"Expense updated":"Expense recorded"),k(!1),I(),R()}catch(e){g.oR.error("Failed to save expense")}},D=async e=>{if(confirm("Are you sure you want to delete this expense?"))try{if(!(await fetch("/api/expenses/".concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete expense");g.oR.success("Expense deleted"),R()}catch(e){g.oR.error("Failed to delete expense")}},I=()=>{S(null),F({propertyId:"",description:"",amount:"",category:"",date:new Date().toISOString().split("T")[0],notes:""})};return b?(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[(0,r.jsx)(u.A,{className:"h-8 w-8"}),"Expenses"]}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Track property expenses and costs"})]}),(0,r.jsxs)(d.lG,{open:w,onOpenChange:e=>{k(e),e||I()},children:[(0,r.jsx)(d.zM,{asChild:!0,children:(0,r.jsxs)(n.$,{children:[(0,r.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Add Expense"]})}),(0,r.jsx)(d.Cf,{children:(0,r.jsxs)("form",{onSubmit:M,children:[(0,r.jsxs)(d.c7,{children:[(0,r.jsxs)(d.L3,{children:[E?"Edit":"Add"," Expense"]}),(0,r.jsxs)(d.rr,{children:[E?"Update":"Record a new"," property expense"]})]}),(0,r.jsxs)("div",{className:"space-y-4 py-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"property",children:"Property"}),(0,r.jsxs)(o.l6,{value:C.propertyId,onValueChange:e=>F({...C,propertyId:e}),required:!0,children:[(0,r.jsx)(o.bq,{children:(0,r.jsx)(o.yv,{placeholder:"Select property"})}),(0,r.jsx)(o.gC,{children:t.map(e=>(0,r.jsx)(o.eb,{value:e.id,children:e.name},e.id))})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"description",children:"Description"}),(0,r.jsx)(l.p,{id:"description",value:C.description,onChange:e=>F({...C,description:e.target.value}),placeholder:"e.g., Plumbing repair",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"amount",children:"Amount"}),(0,r.jsx)(l.p,{id:"amount",type:"number",step:"0.01",value:C.amount,onChange:e=>F({...C,amount:e.target.value}),placeholder:"e.g., 150.00",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"category",children:"Category"}),(0,r.jsxs)(o.l6,{value:C.category,onValueChange:e=>F({...C,category:e}),required:!0,children:[(0,r.jsx)(o.bq,{children:(0,r.jsx)(o.yv,{placeholder:"Select category"})}),(0,r.jsx)(o.gC,{children:f.map(e=>(0,r.jsx)(o.eb,{value:e,children:e},e))})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"date",children:"Date"}),(0,r.jsx)(l.p,{id:"date",type:"date",value:C.date,onChange:e=>F({...C,date:e.target.value}),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"notes",children:"Notes (Optional)"}),(0,r.jsx)(x.T,{id:"notes",value:C.notes,onChange:e=>F({...C,notes:e.target.value}),placeholder:"Additional notes...",rows:3})]})]}),(0,r.jsx)(d.Es,{children:(0,r.jsxs)(n.$,{type:"submit",children:[E?"Update":"Record"," Expense"]})})]})})]})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,r.jsxs)(i.Zp,{children:[(0,r.jsx)(i.aR,{className:"pb-2",children:(0,r.jsx)(i.ZB,{className:"text-sm font-medium",children:"Total Expenses"})}),(0,r.jsxs)(i.Wu,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:(0,v.v)(e.reduce((e,s)=>e+Number(s.amount),0))}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"All time"})]})]}),(0,r.jsxs)(i.Zp,{children:[(0,r.jsx)(i.aR,{className:"pb-2",children:(0,r.jsx)(i.ZB,{className:"text-sm font-medium",children:"Total Records"})}),(0,r.jsxs)(i.Wu,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:e.length}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Expense entries"})]})]}),(0,r.jsxs)(i.Zp,{children:[(0,r.jsx)(i.aR,{className:"pb-2",children:(0,r.jsx)(i.ZB,{className:"text-sm font-medium",children:"Properties"})}),(0,r.jsxs)(i.Wu,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:t.length}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"With expenses"})]})]})]}),(0,r.jsxs)(i.Zp,{children:[(0,r.jsxs)(i.aR,{children:[(0,r.jsx)(i.ZB,{children:"All Expenses"}),(0,r.jsx)(i.BT,{children:"A list of all property expenses"})]}),(0,r.jsx)(i.Wu,{children:0===e.length?(0,r.jsx)("p",{className:"text-center text-muted-foreground py-8",children:"No expenses recorded yet. Add your first expense to get started."}):(0,r.jsxs)(h.XI,{children:[(0,r.jsx)(h.A0,{children:(0,r.jsxs)(h.Hj,{children:[(0,r.jsx)(h.nd,{children:"Date"}),(0,r.jsx)(h.nd,{children:"Property"}),(0,r.jsx)(h.nd,{children:"Description"}),(0,r.jsx)(h.nd,{children:"Category"}),(0,r.jsx)(h.nd,{children:"Amount"}),(0,r.jsx)(h.nd,{className:"text-right",children:"Actions"})]})}),(0,r.jsx)(h.BF,{children:e.map(e=>(0,r.jsxs)(h.Hj,{children:[(0,r.jsx)(h.nA,{children:new Date(e.date).toLocaleDateString()}),(0,r.jsx)(h.nA,{className:"font-medium",children:e.property.name}),(0,r.jsx)(h.nA,{children:e.description}),(0,r.jsx)(h.nA,{children:(0,r.jsx)(p.E,{variant:"outline",children:e.category})}),(0,r.jsx)(h.nA,{className:"font-bold",children:(0,v.v)(e.amount.toString())}),(0,r.jsxs)(h.nA,{className:"text-right space-x-2",children:[(0,r.jsx)(n.$,{variant:"ghost",size:"sm",onClick:()=>{S(e),F({propertyId:e.propertyId,description:e.description,amount:e.amount.toString(),category:e.category,date:new Date(e.date).toISOString().split("T")[0],notes:e.notes||""}),k(!0)},children:(0,r.jsx)(j.A,{className:"h-4 w-4"})}),(0,r.jsx)(n.$,{variant:"ghost",size:"sm",onClick:()=>D(e.id),children:(0,r.jsx)(y.A,{className:"h-4 w-4 text-destructive"})})]})]},e.id))})]})})]})]})}}},e=>{e.O(0,[678,817,4,702,441,255,358],()=>e(e.s=4382)),_N_E=e.O()}]);