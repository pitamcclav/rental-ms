(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[90],{1360:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});let n=(0,s(1847).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},2808:(e,t,s)=>{Promise.resolve().then(s.bind(s,8611))},5993:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});let n=(0,s(1847).A)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]])},8514:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});let n=(0,s(1847).A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},8611:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>A});var n=s(5155),a=s(2115),r=s(3998),i=s(6948),d=s(1834),l=s(5142),c=s(6444),o=s(1186),h=s(7270),u=s(1647),x=s(5993),p=s(6191),j=s(8514),m=s(1360),y=s(8720),v=s(4269);function A(){let[e,t]=(0,a.useState)([]),[s,A]=(0,a.useState)([]),[f,g]=(0,a.useState)(!0),[N,k]=(0,a.useState)(!1),[w,C]=(0,a.useState)(null),[b,S]=(0,a.useState)({code:"",name:"",propertyId:"",rentAmount:"",status:"vacant"});(0,a.useEffect)(()=>{U(),F()},[]);let U=async()=>{try{let e=await fetch("/api/units"),s=await e.json();t(s)}catch(e){y.oR.error("Failed to fetch units")}finally{g(!1)}},F=async()=>{try{let e=await fetch("/api/properties"),t=await e.json();A(t)}catch(e){y.oR.error("Failed to fetch properties")}},E=async e=>{e.preventDefault();try{let e=w?"/api/units/".concat(w.id):"/api/units";if(!(await fetch(e,{method:w?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...b,rentAmount:parseFloat(b.rentAmount)})})).ok)throw Error("Failed to save unit");y.oR.success(w?"Unit updated":"Unit created"),k(!1),R(),U()}catch(e){y.oR.error("Failed to save unit")}},M=async e=>{if(confirm("Are you sure you want to delete this unit?"))try{if(!(await fetch("/api/units/".concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete unit");y.oR.success("Unit deleted"),U()}catch(e){y.oR.error("Failed to delete unit")}},R=()=>{C(null),S({code:"",name:"",propertyId:"",rentAmount:"",status:"vacant"})};return f?(0,n.jsx)("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[(0,n.jsx)(x.A,{className:"h-8 w-8"}),"Units"]}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Manage rental units across properties"})]}),(0,n.jsxs)(d.lG,{open:N,onOpenChange:e=>{k(e),e||R()},children:[(0,n.jsx)(d.zM,{asChild:!0,children:(0,n.jsxs)(r.$,{children:[(0,n.jsx)(p.A,{className:"h-4 w-4 mr-2"}),"Add Unit"]})}),(0,n.jsx)(d.Cf,{children:(0,n.jsxs)("form",{onSubmit:E,children:[(0,n.jsxs)(d.c7,{children:[(0,n.jsxs)(d.L3,{children:[w?"Edit":"Add"," Unit"]}),(0,n.jsxs)(d.rr,{children:[w?"Update":"Create a new"," unit details"]})]}),(0,n.jsxs)("div",{className:"space-y-4 py-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(c.J,{htmlFor:"property",children:"Property"}),(0,n.jsxs)(o.l6,{value:b.propertyId,onValueChange:e=>S({...b,propertyId:e}),required:!0,children:[(0,n.jsx)(o.bq,{children:(0,n.jsx)(o.yv,{placeholder:"Select property"})}),(0,n.jsx)(o.gC,{children:s.map(e=>(0,n.jsx)(o.eb,{value:e.id,children:e.name},e.id))})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(c.J,{htmlFor:"code",children:"Unit Code (Optional)"}),(0,n.jsx)(l.p,{id:"code",value:b.code,onChange:e=>S({...b,code:e.target.value}),placeholder:"Leave blank to auto-generate (e.g., UNIT-0001)"}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"Auto-generated if left blank"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(c.J,{htmlFor:"name",children:"Unit Name"}),(0,n.jsx)(l.p,{id:"name",value:b.name,onChange:e=>S({...b,name:e.target.value}),placeholder:"e.g., Apartment 101",required:!0})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(c.J,{htmlFor:"rentAmount",children:"Monthly Rent"}),(0,n.jsx)(l.p,{id:"rentAmount",type:"number",step:"0.01",value:b.rentAmount,onChange:e=>S({...b,rentAmount:e.target.value}),placeholder:"e.g., 1200.00",required:!0})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(c.J,{htmlFor:"status",children:"Status"}),(0,n.jsxs)(o.l6,{value:b.status,onValueChange:e=>S({...b,status:e}),children:[(0,n.jsx)(o.bq,{children:(0,n.jsx)(o.yv,{})}),(0,n.jsxs)(o.gC,{children:[(0,n.jsx)(o.eb,{value:"vacant",children:"Vacant"}),(0,n.jsx)(o.eb,{value:"occupied",children:"Occupied"})]})]})]})]}),(0,n.jsx)(d.Es,{children:(0,n.jsxs)(r.$,{type:"submit",children:[w?"Update":"Create"," Unit"]})})]})})]})]}),(0,n.jsxs)(i.Zp,{children:[(0,n.jsxs)(i.aR,{children:[(0,n.jsx)(i.ZB,{children:"All Units"}),(0,n.jsx)(i.BT,{children:"A list of all rental units"})]}),(0,n.jsx)(i.Wu,{children:0===e.length?(0,n.jsx)("p",{className:"text-center text-muted-foreground py-8",children:"No units found. Add your first unit to get started."}):(0,n.jsxs)(h.XI,{children:[(0,n.jsx)(h.A0,{children:(0,n.jsxs)(h.Hj,{children:[(0,n.jsx)(h.nd,{children:"Code"}),(0,n.jsx)(h.nd,{children:"Name"}),(0,n.jsx)(h.nd,{children:"Property"}),(0,n.jsx)(h.nd,{children:"Rent"}),(0,n.jsx)(h.nd,{children:"Status"}),(0,n.jsx)(h.nd,{className:"text-center",children:"Tenants"}),(0,n.jsx)(h.nd,{className:"text-right",children:"Actions"})]})}),(0,n.jsx)(h.BF,{children:e.map(e=>{var t;return(0,n.jsxs)(h.Hj,{children:[(0,n.jsx)(h.nA,{className:"font-medium",children:e.code}),(0,n.jsx)(h.nA,{children:e.name}),(0,n.jsx)(h.nA,{className:"text-muted-foreground",children:e.property.name}),(0,n.jsx)(h.nA,{children:(0,v.v)(e.rentAmount.toString())}),(0,n.jsx)(h.nA,{children:(0,n.jsx)(u.E,{variant:"occupied"===e.status?"default":"secondary",children:e.status})}),(0,n.jsx)(h.nA,{className:"text-center",children:(null==(t=e._count)?void 0:t.tenants)||0}),(0,n.jsxs)(h.nA,{className:"text-right space-x-2",children:[(0,n.jsx)(r.$,{variant:"ghost",size:"sm",onClick:()=>{C(e),S({code:e.code,name:e.name,propertyId:e.propertyId,rentAmount:e.rentAmount.toString(),status:e.status}),k(!0)},children:(0,n.jsx)(j.A,{className:"h-4 w-4"})}),(0,n.jsx)(r.$,{variant:"ghost",size:"sm",onClick:()=>M(e.id),children:(0,n.jsx)(m.A,{className:"h-4 w-4 text-destructive"})})]})]},e.id)})})]})})]})]})}}},e=>{e.O(0,[678,817,4,702,441,255,358],()=>e(e.s=2808)),_N_E=e.O()}]);